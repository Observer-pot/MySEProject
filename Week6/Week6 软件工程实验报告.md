# Week6 软件工程实验报告

| 组员名单 | 黄梓轩   | 李嘉毅  | 梁恒中   |
| -------- | -------- | ------- | -------- |
| 学号     | 19335085 | 1335098 | 19335119 |

## 实验内容

完成一个项目可行性报告的框架

- 项目题目
- 项目背景（技术的、经济的、社会的）和目标概述
- 项目产品的表现形态、主要功能和性能
- 项目技术路线和技术成熟度分析
- 项目资源（技术、人力、预算、时间等资源）分析
- 项目风险分析
- 时间进度分析

## 项目题目

龙芯基础指令集架构模拟器LARS(Loongarch Assembler and Runtime Simulator)

### 项目背景

#### 技术背景

龙芯指令集（Loongarch）是龙芯中科于2020年推出的一个全新的指令集架构。包括基础架构部分和向量指令、虚拟化、二进制翻译等扩展部分，近2000条指令，具有较好的自主性、先进性与兼容性。龙芯指令系统从整个架构的顶层规划，到各部分的功能定义，再到细节上每条指令的编码、名称、含义，在架构上进行自主重新设计，具有充分的自主性。

龙芯指令系统摒弃了传统指令系统中部分不适应当前软硬件设计技术发展趋势的陈旧内容，吸纳了近年来指令系统设计领域诸多先进的技术发展成果。同原有兼容指令系统相比，不仅在硬件方面更易于高性能低功耗设计，而且在软件方面更易于编译优化和操作系统、虚拟机的开发。其在设计时充分考虑兼容生态需求，融合了各国际主流指令系统的主要功能特性，同时依托龙芯团队在二进制翻译方面十余年的技术积累创新，能够实现多种国际主流指令系统的高效二进制翻译。龙芯中科从2020年起新研的CPU均支持LoongArch®。

基于其完善开源的指令集架构，我们的模拟器可以较为简单地实现功能。

#### 经济背景

芯片行业是一个资金密集的行业。研发一款旗舰SoC手机芯片的费用约为数亿美元。之前有消息称华为麒麟980研发投入大约为3亿美元。

芯片制造更是高投入重资产，以台积电为例，2020年台积电的资本投入上看至200亿美元。如此高的资金投入让很多企业投不起而掉下队来，芯片代工行业越来越集中，订单越来越多交到台积电手中，甚至英特尔都开始把部分订单交给台积电，从而造就了台积电今天的行业地位。

所以芯片技术密集和资金密集这两大特性使得玩家越来越少，最终是赢家通吃。

全球芯片巨头包括英特尔、AMD、高通、三星、台积电等，这些大玩家们无论技术实力还是资金实力都让业界其他企业难以望其项背。

#### 社会背景

目前芯片业依然是美国最重要的产业，有一大批实力雄厚的大公司在主导整个产业的发展。美国一共有苹果、英特尔、英伟达、IBM、高通、德州仪器、博通七家七亿美元级别的顶尖科技公司，这些公司都是芯片细分领域的龙头企业。

而由于中美关系日益紧张，我国芯片面临着严重的卡脖子问题。这需要我们摆脱对国外企业的依赖，自主研发产品，自己构建行业生态。我们的龙芯基础指令集架构模拟器正是在这样的背景下孕育而出，为国内的行业生态尽一份力。

### 目标概述

我们的项目大致有以下三个目标：

1. 为Loongarch指令集架构生态添砖加瓦。Loongarch作为一个新的指令集架构，其生态的建立方兴未艾。该项目的开发可以在一定程度上完善Loongarch指令集架构生态。
2. 基于目前基于Loongarch指令集架构的处理器较为稀少，价格较为高昂，该项目的开发可以降低普通开发人员接触Loongarch指令集架构的门槛，有利于推广Loongarch指令集架构。
3. 该项目的开发能够支持企业/高校围绕Loongarch指令集架构培训计算机相关技术人员，培养更多人才攻坚解决目前国家的卡脖子问题。

### 表现形态与主要功能
在其他操作系统上运行的软件工具，具有图形化交互界面，支持指令输入，能够执行LoongArch指令。
### 性能
预期峰值运算速度超过1.6GFlops,支持并行运算。

### 项目技术路线和技术成熟度分析

#### 技术路线

##### 1.模拟计算机CPU内部各个模块的实现与统一

- 计算模块
  - 研究实现简单的整形的数值运算，保留可拓展至浮点预算的潜力。
- 控制模块
  - 研究管理与调度指令的执行与存储。
- 存储模块
  - 研究寄存器的模拟与实现，使其可以存储计算与调度完成后的结果。
- 统一综合
  - 研究各模块统一综合，使之成为一个可运行指令的整体，为后续研究打下坚实基础。

##### 2.面向多平台的龙芯基础指令集架构模拟器

- 编码
  - 研究如何接受Loongarch汇编指令输入，将Loongarch汇编编译为Loongarch机器码，预期兼容的指令包括但不限于：
    - 用于整型标量运算的指令，包括算术运算、移位运算和位运算等。
    - 用于控制跳转的指令。
    - 用于访问内存的指令。
  - 可能兼容的指令包括：
    - 浮点运算指令
    - SIMD指令
    - 原子访问指令
- 解码
  - 研究将Loongarch汇编编译为Loongarch机器码，研究根据《龙芯架构参考手册 卷1：基础架构》中提供的指令码，将用户输入的汇编指令编译为机器码，以供后续在虚拟CPU上运行。同时将在一定程度上指出用户输入中的语法错误。

##### 3.面向学习者，开发者的龙芯基础指令集架构模拟器工具

- 控制流展示
  - 研究可互动的用户界面，可以分解指令编码解码的步骤，支持指令的单步调试，与批量的指令运行以展示指令编码解码的全过程。
- 结果展示
  - 研究直观显示程序运行中相关寄存器的数据和内存区域的数据。可选功能包括高亮值发生改变的寄存器和内存区域。

#### 技术成熟度分析

本项目主要参考密苏里州立大学MARS(Mips Assembler and Runtime Simulator)项目的功能实现和设计理念，以之为标杆根据自身实际需求进行设计和开发。
MARS及其相关设计理念已经在实际生产中得到应用，被广泛用于高校教育和企业培训中。本项目预期能够实现与MARS相似的功能和相近的性能，将不仅能够满足项目预期需求，并且能够被用于生产和学习用途。

### 项目资源分析

#### 技术

1. 龙芯指令集开源底层代码

2. 知识储备：

   计算机组成原理：
   CPU组成架构

​		编译原理：
​		将汇编语言的编译机制与流程

java swing：
swing提供简洁的图形化界面

3. 平台：vscode/eclipse用于开发，GitHub用于组内交流

#### 人力

三名本科生

#### 预算

三台便携式电脑用作开发

三名人员的劳工费(因志愿进行，无需筹集)

用于专业学习的资料费

#### 时间

大致开发时间为3个月，每个阶段大约一月

### 项目风险分析

1.开发时间不足，预期功能未能实现
2.项目组成员压力过大放弃开发寻求更简单的项目

### 时间进度分析

| 日期               | 1                              |
| ------------------ | ------------------------------ |
| 三月中旬到四月中旬 | 完成可行性分析及项目规格说明书 |
| 四月中旬到五月中旬 | 完成模块制作及整合测试         |
| 五月中旬到六月初   | 完成整体测试并交付             |







