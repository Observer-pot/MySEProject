# Week8 软件工程实验报告

| 组员名单 | 黄梓轩   | 李嘉毅  | 梁恒中   |
| -------- | -------- | ------- | -------- |
| 学号     | 19335085 | 1335098 | 19335119 |

## 项目软件需求分析报告

### 成本预算

#### 人力预算

三名本科生

#### 金钱预算

三台便携式电脑用作开发

三名人员的劳工费(因志愿进行，无需筹集)

用于专业学习的资料费

### 交付进度

| 日期               | 任务                           |
| ------------------ | ------------------------------ |
| 三月中旬到四月中旬 | 完成可行性分析及项目规格说明书 |
| 四月中旬到五月中旬 | 完成模块制作及整合测试         |
| 五月中旬到六月初   | 完成整体测试并交付             |

### 开发方法

采用结构化开发方法，按照功能分解的原则，自顶向下将程序分成不同模块以软件功能。由于以功能分解为基础，而用户的功能需求可能改变，可能导致系统的框架结构不稳定。故数据流程图到软件结构图之间的过渡有明显的断层，设计回溯到需求是有一定困难的。但由于本项目用户需求较为固定，此情况下自顶向下模块化开发较为简便，所以此开发方法被选用。

### 质量保证

(1)项目建立软件质量保证体系，负责人对所承软件质量负责;

(2)保证软件质量符合验收规范的标准

(3)软件验收时保证:质量控制资料齐全;工程有关检验资料完整;各部分工程质量均验收合格

### 验证和确认准则

(1)一致性 模拟器各模块实现功能必须不相矛盾。
(2)完整性 模拟器各模块必须完整,所有模块整体能完整满足软件需求
(3)现实性 模拟器各模块目标功能必须具有可实现性，能在有限时间和技术内实现
(4)有效性 必须证明模拟器各模块功能对实现软件功能切实有效

### 验收流程

1. 验收软件是否满足所有需求
2. 验收软件功能是否正确
3. 验收软件性能和安全性是否符合标准

# 软件需求规格说明书

## 引言

#### 1.1 目的

​	本SRS旨在使顾客更好理解本软件的功能与特点，从而更好地使用本软件。

#### 1.2 范围

本软件全名龙芯基础指令集模拟器LARS，用于模拟Loongarch指令的运行并输出结果。该项目的开发可以在一定程度上完善Loongarch指令集架构生态。

#### 1.3 定义、简写和缩略语

LARS：龙芯基础指令集模拟器
LA64：64位龙芯指令集
LA32：32位龙芯指令集

#### 1.4 引用文件

《龙芯架构参考手册 卷一：基础架构》--龙芯中科

#### 1.5 综述

本报告剩余的部分将按一下方案组织：第二章总体描述产品的功能，特点以及各种约束。第三章将详细介绍具体的需求，在3.1节中介绍产品的接口，3.2节中介绍产品的功能，3.3节中介绍产品的性能等各种指标。

## 总体描述

#### 2.1 产品描述

龙芯基础指令集模拟器LARS（下称本软件）使用Java开发，接收用户提供的LA64/LA32汇编指令，经过编译后生成二进制码。同时本软件模拟基于龙芯指令集架构的处理器的运行，接受由LA64/LA32汇编编译生成的二进制码，经过完整的取值、译码、执行、访存和写回流水线，并将程序的运行结果提供给用户。

#### 2.2 产品功能

* 将LA64/LA32汇编指令编译为二进制码
* 完整的基于龙芯基础指令集架构的处理器执行流水线
* 执行LA64/LA32指令，并向用户展示执行结果

#### 2.3 用户特点

本软件预期用户为能够熟练编写LA64/LA32汇编指令的编程人员，或正在学习LA64/LA32汇编指令的人员。

#### 2.4 约束

本次开发严格遵守《计算机软件保护条例》

本次开发严格遵守龙芯中科技术股份有限公司《用户协议》及《隐私政策》

#### 2.5 假设和依赖关系

- 假设一：假设用户使用系统为Ubuntu16.04或以上版本

## 3.具体需求

#### 3.1外部接口需求

本软件暂无外部接口需求

##### 3.1.1用户界面

本软件具有简洁的用户界面，提供编辑，控制和展示功能：

* 编辑：提供用于编译和查看源文件的界面

* 控制：提供用于控制软件运行的按键，包括用于编译源文件，运行，单步运行，停止的按键
* 展示：提供用于展示指令运行结果的面板

##### 3.1.2硬件接口

本软件暂无硬件接口

##### 3.1.3软件接口

本软件暂无软件接口

##### 3.1.4 通信接口

本软件暂无通信接口

#### 3.2功能需求

##### 3.2.1信息流

###### 算术逻辑运算指令流图

一条算术逻辑运算指令包含的信息：

1. 操作码，用于提示运算类型
2. 操作数，包括源操作数（source），目标操作数（target）和目的操作数（destination）。根据龙芯架构规范，所有算术逻辑运算指令的操作数均为寄存器。

具体流程如下：

1. 根据程序计数器PC获得下一条算术逻辑运算指令的地址
2. 根据上一步得到的地址，从内存中加载指令
3. 指令传入解码单元，获得操作码和操作数
4. 操作码传入ALU，同时ALU根据源操作数从寄存器堆加载数据
5. ALU根据操作码进行算术逻辑运算，运算结果根据目标操作数写回寄存器椎，必要时还会修改标志位

###### 访存指令流图

一条访存指令包含的信息：

1. 操作码
2. 两个操作数，均为寄存器，其中一个包含将要访问的地址，另一个包含将要写入的数据，或用于保存读入的数据
3. 其它信息，例如提示访问内存大小的信息

具体流程如下：

1. 根据程序计数器PC获得下一条访存指令的地址
2. 根据上一步得到的地址，从内存中加载指令
3. 指令传入解码单元，获得操作码和操作数
4. 操作码传入访存单元，访存单元根据操作数从寄存器椎获得将要访问的内存地址
5. 访存单元访问内存，将数据写回内存或从内存读入内存

###### 跳转指令流图

一条跳转指令包含的信息：

1. 操作码，提示跳转类型（有条件或无条件）和跳转条件（如果有）
2. 一个或多个操作数。如果有多个操作数，则所有操作数均为寄存器；如果只有一个操作数，则操作数可以为寄存器或立即数。操作数提示将要跳转到的地址的偏移或绝对地址。如果有多个操作数，还将提示跳转的判断依据

具体流程为：

1. 根据程序计数器PC获得下一条访存指令的地址
2. 根据上一步得到的地址，从内存中加载指令
3. 指令传入解码单元，获得操作码和操作数
4. 操作数传入ALU，ALU根据操作数确定跳转类型，并从程序计数器获得数据。
5. 如果是无条件跳转，则立即将程序计数器加上偏移写回到程序计数器或立即将绝对地址写回到程序计数器。
6. 如果是有条件跳转，则判断条件是否成立。如不成立，则忽略，否则立即将程序计数器加上偏移写回到程序计数器或立即将绝对地址写回到程序计数器。

##### 3.2.2 过程描述

###### 编译

编译的目的在于将用户输入的汇编指令编译为本程序可以执行的二进制码。编码将用户输入的汇编助记符直接翻译为二进制码中的操作数，并将汇编指令中的操作数填入二进制码中的操作数位域得到目标二进制码。

###### 指令执行

编译得到的可执行二进制码将被本程序加载到特定的内存区域等待执行，编译完成后程序计数器指向第一条可执行二进制码。

用户程序开始执行后，在不发生跳转的情况下指令将顺序执行。指令的执行流程包括：

1. 取指，处理器根据程序计数器从内存加载指令
2. 译码，将指令分解为操作码和操作数
3. 执行，ALU根据操作码和操作数进行运算
4. 访存，访存单元根据操作码和操作数进行内存访问
5. 写回，将ALU的运算结果或访存单元从内存读入的数据写回到寄存器

一条指令的执行流程包括上面的多个步骤，且至少包括取指和译码步骤

###### UI更新

本程序允许指令单步执行。

每条指令执行完成后，本程序将从寄存器椎中读取执行结果用于更新用户界面以向用户展示执行结果。

##### 3.2.3数据构建规范

本程序编译得到的二进制码严格遵循《龙芯架构参考手册 卷一：基础架构》规范。

##### 3.2.4数据字典



#### 3.3 性能需求

完成100条指令的执行所需的时间应小于1s

#### 3.4设计约束

#### 3.5软件系统属性

##### 3.5.1 可靠性

对于不符合规范的用户输入，本软件能够正确识别并指出。

##### 3.5.2 可移植性

本软件使用Java开发，不依赖于其它库，独立于特定的 IDE，可直接运行在 JDK 上。

#### 3.6其他需求

本软件使用Java开发，要求用户计算机安装Java Runtime Environment(JRE)，最低版本为1.7
