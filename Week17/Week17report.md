# Week17 软件工程实验报告

| 组员名单 | 黄梓轩   | 李嘉毅  | 梁恒中   |
| -------- | -------- | ------- | -------- |
| 学号     | 19335085 | 1335098 | 19335119 |

# 项目开发总结报告
## 引言

### 标识

本文档适用于龙芯指令集汇编和运行时模拟器LARS（下称本软件）。

### 系统概述

本项目可以在JDK15以上的环境下直接运行，不需要其他依赖。本软件全名龙芯基础指令集模拟器LARS，用于模拟Loongarch指令的运行并输出结果。本系统开发历时一个月，目前运行与维护一个月，都是本小组人员完成。项目的用户面向企业/高校围绕Loongarch指令集架构培训计算机相关技术人员，降低普通开发人员接触Loongarch指令集架构的门槛，有利于推广Loongarch指令集架构。

### 文档概述

本文档用于总结LARS项目开发过程。本文档完全公开。

## 引用文件

《龙芯架构参考手册 卷一：基础架构》--龙芯中科

## 实际开发结果

### 产品

​	本程序系统由三个java文件构成:Mainframe.java,Complier.java和vCPU.java.

| 模块      | 大小 |
| --------- | ---- |
| Mainframe | 21kb |
| Complier  | 8kb  |
| vCPU      | 5kb  |

​	Mainframe调用其它两个模块,将指令编译后运行,结果和错误报告显示在界面上.

### 主要功能和性能

​	本程序实际实现了Loongarch32位汇编指令的输入,编译,运行和结果显示,具有一定的编译报错和运行报错功能,支持单步运行与全部运行.基本实现了项目需求报告中的需求.性能上也完全达标.未完成的功能有并行多指令和Loongarch64位汇编指令编译运行.

### 基本流程

![时序图](/Users/zixuanhuang/Documents/Github_Program/MySEProject/Week16/时序图.png)

用户将指令输入UI后，UI将数据传输到编译器，编译器编译代码，返回二进制表示，用户查看结果后可以执行代码，此时虚拟CPU运行代码，返回单步或最终结果给UI，UI再展示给用户。

### 进度

​	项目各阶段任务均按时完成.

### 费用

|      | 时间（月） | 预算（元） |
| ---- | ---- | ---- |
| 计划 | 3  | 0  |
| 实际 | 1 | 0 |

## 开发工作评价

### 对生产效率的评价

|  | 程序平均生产效率（行/(人·月）） |文件平均生产效率（千字/(人·月)）|
|-----|------|-------|
|计划| 200 |4  |
|实际| 600 |4  |

### 对产品质量的评价

由于程序代码量较小，在测试过程中暂未发现影响程序运行的错误。
### 对技术方法的评价
本软件开发过程中主要使用到的技术为Java语言，并且没有使用Java语言的高级特性。Java语言是非常成熟的语言，保证了项目开发的顺利进行。
### 出错原因的分析
出错原因主要为开发者对于Java语言的不熟练使用，包括对Java基本语法的不熟练使用以及对Java图形化界面开发的不熟悉。
### 风险管理
#### 预期发生的风险
1. Loongarch汇编发生变化
2. Java语言更新导致程序不可用
#### 实际发生的风险
暂无

## 缺陷与处理
|缺陷|处理方式|
|-----|------|
|窗口缩放时窗口内组件排列出错|固定窗口大小，不允许窗口缩放|
| 没有键盘快捷键，使用起来不方便 | 后续版本增加功能 |
| 不同模块之间的交互存在耦合 | 每个模块都存有其他模块的实例以方便调用 |
## 经验与教训

#### 项目规划

1. 项目开始对于产品开发时间规划不够，迟迟没有开始，到最后才开始，最终只完成了最基础的逻辑运算指令，跳转指令，访存指令，而没有涉及到浮点指令等更多指令。

#### 技术细节

1. 在Java开发中尽量减少Swing的使用，如果可能，使用B/S的开发方法。
2. 划分模块时应尽量使模块的功能互不相交，并且给出模块接口的良好定义。
3. 模块交互的接口要一开始就商量好，以免出现反复修改代码的情况。

## 注解

指令表如下

| 指令              | 二进制码          |            |      |      |
| ----------------- | ----------------- | ---------- | ---- | ---- |
| add.w  rd,rj,rk   | 00000000000100000 | rk         | rj   | rd   |
| addi.w rd,rj,si12 | 0000001010        | si12       | rj   | rd   |
| sub.w rd,rj,rk    | 00000000000100010 | rk         | rj   | rd   |
| mul.w rd,rj,rk    | 00000000000111000 | rk         | rj   | rd   |
| mulh.w rd,rj,rk   | 00000000000111001 | rk         | rj   | rd   |
| div.w rd,rj,rk    | 00000000001000000 | rk         | rj   | rd   |
| div.wu rd,rj,rk   | 00000000001000010 | rk         | rj   | rd   |
| mod.w rd,rj,rk    | 00000000001000001 | rk         | rj   | rd   |
| mod.wu rd,rj,rk   | 00000000001000011 | rk         | rj   | rd   |
| slt rd,rj,rk      | 00000000000100100 | rk         | rj   | rd   |
| sltu rd,rj,rk     | 00000000000100101 | rk         | rj   | rd   |
| and rd,rj,rk      | 00000000000101001 | rk         | rj   | rd   |
| or rd,rj,rk       | 00000000000101010 | rk         | rj   | rd   |
| nor rd,rj,rk      | 00000000000101000 | rk         | rj   | rd   |
| xor rd,rj,rk      | 00000000000101011 | rk         | rj   | rd   |
| andi rd,rj,ui12   | 0000001101        | ui12       | rj   | rd   |
| ori rd,rj,ui12    | 0000001110        | ui12       | rj   | rd   |
| xori rd,rj,ui12   | 0000001111        | ui12       | rj   | rd   |
| sll.w rd,rj,rk    | 00000000000101110 | rk         | rj   | rd   |
| srl.w rd,rj,rk    | 00000000000101111 | rk         | rj   | rd   |
| slli.w rd,rj,ui5  | 00000000010000001 | ui5        | rj   | rd   |
| srli.w rd,rj,ui5  | 00000000010001001 | ui5        | rj   | rd   |
| beq rj, rd, offs  | 010110            | offs[15:0] | rj   | rd   |
| bne rj, rd, offs  | 010111            | offs[15:0] | rj   | rd   |
| jirl rd,rj,offs   | 010011            | offs[15:0] | rj   | rd   |
| LD.W rd,rj,si12   | 0010100010        | si12       | rj   | rd   |
| ST.W rd,rj,si12   | 0010100110        | si12       | rj   | rd   |
